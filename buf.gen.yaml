# Learn more: https://buf.build/docs/configuration/v2/buf-gen-yaml
version: v2

inputs:
  - directory: protos

plugins:
  # TypeScript (messages + service descriptors for Connect-ES)
  - local: protoc-gen-es
    out: src/gen/ts
    # include_imports = true will also generate code for any imported .proto files
    include_imports: true
    opt:
      - target=ts
      # Import extension behavior:
      # - omit this line (default) -> no extension in import paths (works well with TS+bundlers)
      # - or use: import_extension=js   if you want explicit .js in imports for ESM/Node
      # - or use: import_extension=ts   if you're doing pure TS tooling
      # - import_extension=none         removes .js if added
      # - import_extension=none

  # C++ protobuf messages
  - remote: buf.build/protocolbuffers/cpp:v29.5
    out: src/gen/cpp

  # C++ gRPC stubs
  - remote: buf.build/grpc/cpp:v1.76.0
    out: src/gen/cpp
