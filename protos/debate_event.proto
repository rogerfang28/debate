syntax = "proto3";

package debate_event;

import "google/protobuf/timestamp.proto";

// Individual event payloads
message None{
}

message CreateDebate {
    string debate_topic = 2;
}

message ClearDebates {

}

message DeleteDebate {
    string debate_id = 1;
}

message EnterDebate {
    string debate_id = 1;
}

message GoHome {
}

message OpenAddChildClaim {
}

message CloseAddChildClaim {
}

message AddChildClaim {
    string claim         = 1;
    string description   = 2;
}

message OpenReportClaim {
}

message CloseReportClaim {
}

message DeleteCurrentStatement {

}

message DeleteChildClaim {
    string claim_id      = 2;
}

message AddConnection {
    string debate_id     = 2;
    string from_id       = 3;
    string to_id         = 4;
    string connection    = 5;
}

message GoToParentClaim {
}

message GoToClaim {
    string claim_id      = 2;
}

message StartEditClaimDescription {
}

message SubmitEditClaimDescription {
    string new_description = 1;
}

message CancelEditClaimDescription {
}

// enum
enum EventType {
    EVENT_KIND_UNSPECIFIED = 0;
    NONE                   = 1;
    CREATE_DEBATE          = 2;
    CLEAR_DEBATES          = 3;
    DELETE_DEBATE          = 4;
    ENTER_DEBATE           = 5;
    GO_HOME                = 6;
    GO_TO_PARENT          = 7;
    OPEN_ADD_CHILD_CLAIM   = 8;
    ADD_CHILD_CLAIM        = 9;
    DELETE_CURRENT_STATEMENT = 10;
    REPORT_CLAIM           = 11;
    GO_TO_CLAIM            = 12;
    CLOSE_ADD_CHILD_CLAIM  = 13;
    CLOSE_REPORT_CLAIM     = 14;
    SUBMIT_ADD_CHILD_CLAIM = 15;
    DELETE_CHILD_CLAIM     = 16;
    START_EDIT_CLAIM_DESCRIPTION = 17;
    SUBMIT_EDIT_CLAIM_DESCRIPTION = 18;
    CANCEL_EDIT_CLAIM_DESCRIPTION = 19;
}

// main message
message DebateEvent {

  string user_id = 1;
  string id = 2;
  google.protobuf.Timestamp occurred_at = 3;
  EventType type = 4; 

  oneof payload {
    CreateDebate    create_debate    = 10;
    ClearDebates    clear_debates    = 11;
    DeleteDebate    delete_debate    = 12;
    EnterDebate     enter_debate     = 13;
    GoHome          go_home          = 14;
    OpenAddChildClaim open_add_child_claim = 15;
    CloseAddChildClaim close_add_child_claim = 21;
    AddChildClaim   add_child_claim  = 16;
    OpenReportClaim    open_report_claim    = 17;
    CloseReportClaim   close_report_claim   = 22;
    DeleteCurrentStatement delete_current_statement = 18;
    GoToParentClaim   go_to_parent    = 19;
    GoToClaim        go_to_claim     = 20;
    DeleteChildClaim delete_child_claim = 23;
    StartEditClaimDescription start_edit_claim_description = 24;
    SubmitEditClaimDescription submit_edit_claim_description = 25;
    CancelEditClaimDescription cancel_edit_claim_description = 26;
  }
}
