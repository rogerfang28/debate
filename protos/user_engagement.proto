syntax = "proto3";

package user_engagement;

enum EngagementAction {
  ENGAGEMENT_ACTION_UNSPECIFIED = 0;
  ACTION_NONE     = 1;  // basically home page / idle
  ACTION_DEBATING = 2;  // currently in a debate
}

message NoneInfo {
  DebateList available_debates = 1; // list of debates user can join
}

message DebateTopic {
    string id = 1;
    string topic = 2;
    string creator_id = 3;
}

message DebateList {
    repeated DebateTopic topics = 1;
}

message DebatingInfo {
  // string debate_id = 1;
  ClaimInfo current_claim = 1; // current claim being viewed/argued
  string current_claim_description = 2; // description of the current claim
  ClaimInfo parent_claim = 3;  // parent claim of the current claim
  ClaimInfo root_claim = 4;    // root claim of the debate
  repeated ClaimInfo children_claims = 5; // child claims of the current claim
  repeated LinkInfo links = 6; // links under the current claim
  repeated ChallengeInfo current_challenges = 7; // challenges against the current claim
  bool adding_child_claim = 8; // whether the add child claim modal is opened
  bool editing_claim_sentence = 9; // whether the user is editing the current claim
  bool editing_claim_description = 10; // whether the user is editing the current claim description
  bool reporting_claim = 11; // whether the user is reporting the current claim
  message ConnectingInfo {
    string from_claim_id = 1;
    string to_claim_id   = 2;
    string connection = 3;
    bool connecting = 4;
    bool opened_connect_modal = 5;  
  }
  ConnectingInfo connecting_info = 12; // info about connecting claims
}

message ClaimInfo {
  string id = 1;
  string sentence = 2;
  string creator_id = 3;
}

message LinkInfo {
  string id = 1;
  string connect_from = 2;
  string connect_to = 3;
  string connection = 4;  
  string creator_id = 5;
}
message ChallengeInfo{
  string id = 1;
  string sentence = 2;
  string creator_id = 3;
}

message UserEngagement {
  EngagementAction current_action = 1;

  oneof action_info { // kind of like information about the current state of the user
    NoneInfo     none_info     = 2;
    DebatingInfo debating_info = 3;
  }
}
